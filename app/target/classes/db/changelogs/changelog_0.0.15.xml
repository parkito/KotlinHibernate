<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="aesipov" id="alter_idx_lg_rods_special_driving_condition_event">

        <dropIndex indexName="idx_lg_rods_special_driving_condition_event"
                   tableName="lg_rods_special_driving_condition_event"/>

        <createIndex indexName="idx_lg_rods_special_driving_condition_event"
                     tableName="lg_rods_special_driving_condition_event"
                     unique="true">
            <column name="driver_uuid" type="CHAR(32)"/>
            <column name="event_date_and_time" type="TIMESTAMP"/>
            <column name="event_sequence_id" type="INTEGER"/>
            <column name="vehicle_number" type="VARCHAR(10)"/>
            <column name="edit_timestamp" type="TIMESTAMP"/>
        </createIndex>

    </changeSet>

    <changeSet id="eobr_19975_certification_events_update" author="aleivano">
        <sql>
            update
                lg_rods_drivers_certification_of_own_records_event
            set
                timezone_offset_from_utc_in_place_when_the_certification_is_performed =
                    timezone_offset_from_utc_in_place_when_the_certification_is_performed * -30
                ,latitude = -3 * (0.0000001)
                ,longitude = -3 * (0.0000001)
                ,nipp_distance = null
                ,nipp_direction = -1
            where
                timezone_offset_from_utc_in_place_when_the_certification_is_performed > 0
                and timezone_offset_from_utc_in_place_when_the_certification_is_performed &lt;= 20
        </sql>
    </changeSet>

    <changeSet id="eobr_20133_geo_point_update" author="aleivano">
        <sql splitStatements="true">
            update lg_rods_border_crossing_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_driver_duty_status_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_driver_list_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_driver_login_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_driver_logout_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_drivers_certification_of_own_records_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_enabling_hos_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_engine_power_up_shut_down_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_exemption_event set exemption_disabling_latitude = -1 * (0.0000001), exemption_disabling_longitude = -1 * (0.0000001)
                where exemption_disabling_latitude = 0 and exemption_disabling_longitude = 0;
            update lg_rods_exemption_event set exemption_enabling_latitude = -1 * (0.0000001), exemption_enabling_longitude = -1 * (0.0000001)
                where exemption_enabling_latitude = 0 and exemption_enabling_longitude = 0;
            update lg_rods_intermediate_log_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_malfunction_data_diagnostic_even set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_motion_at_change_of_day_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_shipment_documents_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_special_driving_condition_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_supporting_document_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_trailers_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
            update lg_rods_uda_start_stop_event set latitude = -1 * (0.0000001), longitude = -1 * (0.0000001)
                where latitude = 0 and longitude = 0;
        </sql>
    </changeSet>
    
</databaseChangeLog>